(()=>{"use strict";$(document).ready((function(){$(".btn_select_gallery").rvMedia({filter:"image",view_in:"all_media",onSelectFiles:function(t){var l=$(".list-photos-gallery .photo-gallery-item:last-child").data("id")+1;$.each(t,(function(e,a){$(".list-photos-gallery .row").append('<div class="col-md-2 col-sm-3 col-4 photo-gallery-item" data-id="'+(l+e)+'" data-img="'+a.url+'" data-description=""><div class="gallery_image_wrapper"><img src="'+a.thumb+'" alt="image"/></div></div>')})),e(),a(),$(".reset-gallery").removeClass("hidden")}});var e=function(){var e=document.getElementById("list-photos-items");Sortable.create(e,{group:"galleries",sort:!0,delay:0,disabled:!1,store:null,animation:150,handle:".photo-gallery-item",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dataIdAttr:"data-id",forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onEnd:function(){a()}})};e();var a=function(){var e=[];$.each($(".photo-gallery-item"),(function(a,t){$(t).data("id",a),e.push({img:$(t).data("img"),description:$(t).data("description")})})),$("#gallery-data").val(JSON.stringify(e))},t=$(".list-photos-gallery"),l=$("#edit-gallery-item");$(".reset-gallery").on("click",(function(e){e.preventDefault(),$(".list-photos-gallery .photo-gallery-item").remove(),a(),$(this).addClass("hidden")})),t.on("click",".photo-gallery-item",(function(){var e=$(this).data("id");$("#delete-gallery-item").data("id",e),$("#update-gallery-item").data("id",e),$("#gallery-item-description").val($(this).data("description")),l.modal("show")})),l.on("click","#delete-gallery-item",(function(e){e.preventDefault(),l.modal("hide"),t.find(".photo-gallery-item[data-id="+$(this).data("id")+"]").remove(),a(),0===t.find(".photo-gallery-item").length&&$(".reset-gallery").addClass("hidden")})),l.on("click","#update-gallery-item",(function(e){e.preventDefault(),l.modal("hide"),t.find(".photo-gallery-item[data-id="+$(this).data("id")+"]").data("description",$("#gallery-item-description").val()),a()}))}))})();
